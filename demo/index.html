<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
    <title>myscript-math</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../myscript-math.html">
    <link rel="import" href="../katex.html">
</head>
<style>
    html, body {
        position: absolute;
        height: 100%;
        width: 100%;
        padding: 0;
        margin: 0;
    }
    #result {
        height: 100px;
    }
    #math-input {
        height: calc(100% - 100px);
    }
    .katex-display {
        display: block;
        margin: 0;
        text-align: center;
        font-size: xx-large;
    }
    .katex-display .katex {
        padding: 5px 0;
    }
</style>
<body unresolved>
<template id="app" is="dom-bind">
    <div id="result" flex></div>
    <myscript-math id="math-input"
                   application-key="af5f7b94-85e6-458c-8336-38f572e2f494"
                   hmac-key="39989a38-7136-46ef-9e6e-45c7eae1f147"
                   timeout="2000"
                   on-latex="recognized">
    </myscript-math>
</template>
<script>
    (function (document) {
        'use strict';
        // Grab a reference to our auto-binding template
        // and give it some initial binding values
        // Learn more about auto-binding templates at http://goo.gl/Dx1u2g
        var app = document.querySelector('#app');
        // Listen for template bound event to know when bindings
        // have resolved and content has been stamped to the page
        app.addEventListener('template-bound', function () {
            console.log('Our app is ready to rock!');
        });
        // See https://github.com/Polymer/polymer/issues/1381
        window.addEventListener('WebComponentsReady', function () {
            document.querySelector('body').removeAttribute('unresolved');
            var result = document.querySelector('#result');

            app.recognized = function (e) {
                katex.render(e.detail, result, {displayMode: true});
            };
        });
    })(document);
</script>
</body>
</html>
